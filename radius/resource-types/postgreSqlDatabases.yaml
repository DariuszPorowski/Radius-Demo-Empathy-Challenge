---
namespace: Radius.Data
types:
  postgreSqlDatabases:
    description: |
      The Radius.Data/postgreSqlDatabases Resource Type deploys a PostgreSQL database.

      To deploy a new PostgreSQL database, add the postgreSqlDatabases resource to
      the application definition Bicep file.

      ```bicep
      extension radius

      @description('The env ID of your Radius Environment. Set automatically by the rad CLI.')
      param environment string

      resource database 'Radius.Data/postgreSqlDatabases@2025-08-01-preview' = {
        name: 'database'
        properties: {
          application: app.id
          environment: environment
        }
      }
      ```

      To connect your container to the database, create a connection from the
      Container resource to the database.

      ```bicep
      resource frontend 'Applications.Core/containers@2023-10-01-preview' = {
        name: 'frontend'
        properties: {
          application: app.id
          connections: {
            postgresql: {
              source: database.id
            }
          }
        }
      }
      ```

      The connection automatically injects environment variables into the
      container for all properties from the database.

      The environment variables are named:
      `CONNECTION_<CONNECTION-NAME>_<PROPERTY-NAME>`.
      For a connection named `postgresql`, the environment variables will be:

      - CONNECTION_POSTGRESQL_DATABASE
      - CONNECTION_POSTGRESQL_USERNAME
      - CONNECTION_POSTGRESQL_PASSWORD
      - CONNECTION_POSTGRESQL_HOST
      - CONNECTION_POSTGRESQL_PORT
    apiVersions:
      2025-08-01-preview:
        schema:
          type: object
          properties:
            environment:
              type: string
              description: "(Required) The Radius Environment ID. Typically set by the rad CLI. Typically value should be `environment`."
            application:
              type: string
              description: "(Optional) The Radius Application ID. `app.id` for example."
            size:
              type: string
              enum: ['S', 'M', 'L']
              description: "(Optional) The size of the PostgreSQL database."
            database:
              type: string
              description: The name of the database.
              readOnly: true
            host:
              type: string
              description: The host name used to connect to the database.
              readOnly: true
            port:
              type: string
              description: The port number used to connect to the database.
              readOnly: true
            username:
              type: string
              description: The username for connecting to the database.
              readOnly: true
            password:
              type: string
              description: The password for connecting to the database.
              readOnly: true
          required: [environment]
